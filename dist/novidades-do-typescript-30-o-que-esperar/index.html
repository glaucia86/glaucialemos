<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8" />
    <title>Novidades do Typescript 3.0 - O que Esperar? // Glaucia Lemos</title>
    <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="HandheldFriendly" content="true" />

    <link rel="shortcut icon" href="/code.ico" type="image/x-icon">

    <link rel="stylesheet" href="/css/main.css" />
    <link rel="stylesheet" href="/css/highlight.css" />
    <link rel="stylesheet" href="/css/senna.css" />

    <script src="/js/senna.min.js"></script>
    <script src="/js/headroom.min.js"></script>
    <script src="/js/main.js"></script>

    <!-- Inspectlet -->
    <script>
      window.__insp = window.__insp || [];
      __insp.push(['wid', 772378335]);
      (function () {
        function __ldinsp() {
          const insp = document.createElement('script');
          insp.type = 'text/javascript';
          insp.async = true;
          insp.id = 'inspsync';
          insp.src = `${document.location.protocol == 'https:' ? 'https' : 'http'
    }://cdn.inspectlet.com/inspectlet.js`;
          const x = document.getElementsByTagName('script')[0];
          x.parentNode.insertBefore(insp, x);
        }
        if (window.attachEvent) {
          window.attachEvent('onload', __ldinsp);
        } else {
          window.addEventListener('load', __ldinsp, false);
        }
      }());
    </script>

    <!-- Google Analytics -->
    <script>
      (function (i, s, o, g, r, a, m) {
        i.GoogleAnalyticsObject = r;
        (i[r] = i[r]
    || function () {
            (i[r].q = i[r].q || []).push(arguments);
          }),
        (i[r].l = 1 * new Date());
        (a = s.createElement(o)), (m = s.getElementsByTagName(o)[0]);
        a.async = 1;
        a.src = g;
        m.parentNode.insertBefore(a, m);
      }(
  window,
  document,
  'script',
  '//www.google-analytics.com/analytics.js',
  'ga',
));
      ga('create', 'UA-4114546-2', 'auto');
      ga('send', 'pageview');
    </script>
  </head>
  <body data-senna data-senna-surface>
    <div class="senna-loading-bar"></div>

    <header class="site-header site-header-white">
      <a href="/" class="logo">Glaucia Lemos</a>
    
      <nav class="site-nav">
        <ul>
          <li><a href="/articles/">Artigos</a></li>
          <li><a href="/resume/">Curr√≠culo</a></li>
          <li><a href="/talks/">Palestras</a></li>
          <li><a href="/projects/">Projetos</a></li>
          <li><a href="/about/">Sobre Mim</a></li>
          <li><a href="/thoughts/">Pensamentos</a></li>
          <li><a href="/contact/">Entre em Contato</a></li>
        </ul>
      </nav>
    
      <div class="nav-social">
        <a href="https://github.com/glaucia86" title="GitHub">
          <svg viewBox="0 0 512 512">
            <path
              d="M256 70.7c-102.6 0-185.9 83.2-185.9 185.9 0 82.1 53.3 151.8 127.1 176.4 9.3 1.7 12.3-4 12.3-8.9V389.4c-51.7 11.3-62.5-21.9-62.5-21.9 -8.4-21.5-20.6-27.2-20.6-27.2 -16.9-11.5 1.3-11.3 1.3-11.3 18.7 1.3 28.5 19.2 28.5 19.2 16.6 28.4 43.5 20.2 54.1 15.4 1.7-12 6.5-20.2 11.8-24.9 -41.3-4.7-84.7-20.6-84.7-91.9 0-20.3 7.3-36.9 19.2-49.9 -1.9-4.7-8.3-23.6 1.8-49.2 0 0 15.6-5 51.1 19.1 14.8-4.1 30.7-6.2 46.5-6.3 15.8 0.1 31.7 2.1 46.6 6.3 35.5-24 51.1-19.1 51.1-19.1 10.1 25.6 3.8 44.5 1.8 49.2 11.9 13 19.1 29.6 19.1 49.9 0 71.4-43.5 87.1-84.9 91.7 6.7 5.8 12.8 17.1 12.8 34.4 0 24.9 0 44.9 0 51 0 4.9 3 10.7 12.4 8.9 73.8-24.6 127-94.3 127-176.4C441.9 153.9 358.6 70.7 256 70.7z"
            ></path>
          </svg>
        </a>
      </div>
    </header>
  </body>
</html>

<main class="post">
  <div class="post-content post-article">
    <div class="post-container">
      <h1 class="post-title">Novidades do Typescript 3.0 - O que Esperar?</h1>
      <h2 class="post-subtitle">Aug 23, 2018</h2>
       <p>Fala, pessoal! Tudo certo?</p>
<p>Estou aqui pra falar um pouco do √∫ltimo release que tivemos da vers√£o 3.0 do t√£o aclamado Typescript!</p>
<p>
  Bom, n√£o percamos tempo; vamos √†s novidades dessa nova vers√£o ‚Äì uma vez que tem uma pancada de coisas legais pra falar aqui!
</p>

<p align="center">
  <img src="https://static.imasters.com.br/wp-content/uploads/2018/08/23154700/B3.jpg"/>  
</p>

<p>
  Sim, a vers√£o 3.0 foi anunciada no √∫ltimo dia 30 de Julho de 2018, pela equipe de engenheiros da Microsoft pelo <b><a href="https://blogs.msdn.microsoft.com/typescript/2018/07/30/announcing-typescript-3-0/">site oficialste</a></b> e tem bastante coisa legal nessa nova vers√£o!
</p>

<p>Vieram muitas coisas, mas s√≥ vou comentar as principais, sendo elas:</p>
<ul>
<li>Uso de Tuplas em par√¢metros rest e express√µes spread</li>
<li>O novo type do Typescript: &#39;unknown&#39;</li>
<li>E, sim, o suporte ao &#39;defaultProps&#39; em JSX</li>
</ul>
<p>
  Outra men√ß√£o v√°lida aqui, √© que o Typescript 3.0 introduziu um novo mode para tsc, o flag ‚Äú‚Äìbuild‚Äù, que permite compila√ß√µes mais r√°pidas de refer√™ncias de projetos em Typescript. N√£o entrarei em detalhes dessa mudan√ßa, mas caso queiram saber mais √† respeito, recomendo entrar na documenta√ß√£o <b><a href="https://www.typescriptlang.org/docs/handbook/project-references.html">atrav√©s deste link</a></b>.
</p>

<p>Bom, vamos comentar as novidades que listei acima!</p>
<h2 id="uso-de-tuplas-em-par√¢metros-rest-e-express√µes-spread">Uso de Tuplas em par√¢metros rest e express√µes spread</h2>
<p>
  Antes de falarmos sobre Tuplas, √© muito importante saber o que de fato s√£o as Tuplas. O que seriam as Tuplas?
</p>

<p>
  Os tipos Tuplas (Tuple) s√£o uma estrutura de dados que nos permitem expressar um determinado array, onde o tipo de n√∫mero fixo de elementos √© conhecido, mas que ao mesmo tempo n√£o h√° necessidade de serem os mesmos.
</p>

<p>
  Vamos a um pequeno exemplo √† respeito: imagine o seguinte cen√°rio: vamos supor que voc√™ queira representar um determinado valor com um par de string e um outro com number:
</p>

<pre><code class="hljs javascript"><span class="hljs-comment">/**
* Arquivo: tuple-basic.ts
 * Author: Glaucia Lemos
 * Data: 23/08/2018
*/</span>

<span class="hljs-comment">// Aqui estamos declarando x com um tipo 'tupla'</span>
<span class="hljs-keyword">let</span> x: [string, number];

<span class="hljs-comment">// Aqui n√£o haver√° erro!</span>
x = [<span class="hljs-string">'Oi! Tudo bem?'</span>, <span class="hljs-number">10</span>];

<span class="hljs-comment">// J√° aqui.... Not okay! üôÅ</span>
x = [<span class="hljs-number">10</span>, <span class="hljs-string">'Oi Tudo bem?'</span>];</code></pre>

<p>
  Esse √© um exemplo simples de como usar uma Tupla. Notem que a √∫ltima linha n√£o vai permitir executar o exemplo, uma vez que est√° errado. Voc√™s podem se aprofundar mais sobre uso de Tuplas neste link.
</p>

<p>
  Bom, mas vamos falar das mudan√ßas feitas nesse tipo! Por exemplo, agora podemos usar tuplas em par√¢metros rest. Mas como? Vejam o exemplo abaixo:
</p>

<pre><code class="hljs javascript"><span class="hljs-comment">/**

 * Arquivo: tuplas-rest-parameters.ts
 * Author: Glaucia Lemos
 * Data: 23/08/2018
*/</span>

<span class="hljs-comment">// Aqui um exemplo de declara√ß√£o de express√£o com uso par√¢metros rest com Tuplas</span>
declare <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">foo</span>(<span class="hljs-params">...args: [number, string, boolean]</span>): <span class="hljs-title">void</span>;

// <span class="hljs-title">Aqui</span> <span class="hljs-title">o</span> <span class="hljs-title">equivalente</span> <span class="hljs-title">a</span> <span class="hljs-title">declara</span>√ß√£<span class="hljs-title">o</span> <span class="hljs-title">da</span> <span class="hljs-title">fun</span>√ß√£<span class="hljs-title">o</span> <span class="hljs-title">acima</span>! üôÇ
<span class="hljs-title">declare</span> <span class="hljs-title">function</span> <span class="hljs-title">foo</span>(<span class="hljs-params">args_0: number, args_1: string, args_2: boolean</span>): <span class="hljs-title">void</span>;</span></code></pre>

<p>Notem como a declara√ß√£o fica mais intuitiva e mais simples de ler. Uma baita mudan√ßa, n√£o √© mesmo?</p>
<p>Outra mudan√ßa interessante √© o uso de tuplas em express√µes spread. Notem a mudan√ßa no c√≥digo abaixo:</p>
<pre><code class="hljs javascript"><span class="hljs-comment">/**

 * Arquivo: tuplas-spread-expression.ts
 * Author: Glaucia Lemos
 * Data: 23/08/2018
*/</span>

<span class="hljs-comment">// Exemplo de tuplas sem uso da express√£o spread</span>
<span class="hljs-keyword">const</span> args: [number, string, boolean] = [<span class="hljs-number">32</span>, <span class="hljs-string">'chocolate'</span>, <span class="hljs-literal">true</span>];
foo(<span class="hljs-number">32</span>, <span class="hljs-string">'chocolate'</span>, <span class="hljs-literal">true</span>);

<span class="hljs-comment">// Exemplo da chamada da fun√ß√£o com o uso da express√£o spread</span>
foo(args[<span class="hljs-number">0</span>], args[<span class="hljs-number">1</span>], args[<span class="hljs-number">2</span>]);
foo(...args);</code></pre>
<p>
  Notem no exemplo acima que quando fazemos uma chamada de uma determinada fun√ß√£o que tenha uma express√£o spread com o tipo tupla, a express√£o corresponder√° a uma sequ√™ncia de argumentos discretos dos tipos correspondentes dos elementos da tupla.
</p>

<p>
  Vamos agora a uma outra mudan√ßa interessante: uso de gen√©ricos em par√¢metros Rest. Vamos a um outro exemplo abaixo e logo em seguida explicarei o que mudou:
</p>

<pre><code class="hljs javascript">/**
 * Arquivo: generic-rest-parameters.ts
 * Author: Glaucia Lemos
 * Data: 23/08/2018
*/

declare function bind&lt;G, L extends any[], U&gt;(f: (x: G, ...args: L) =&gt; U, x: U): (...args: L) =&gt; U;</code></pre>

<p>
  Notem o exemplo acima. Parece meio louco, n√©? Mas, vou explicar aqui o que est√° acontecendo: n√≥s temos os par√¢metros 'args' ‚Äì par√¢metros rest ‚Äì que est√£o herdando de um array do tipo 'any'. O que o Typescript far√°? Ele ir√° extrair essa lista de par√¢metros para qualquer coisa que colocarmos ou passarmos para ‚Äòf‚Äô e transformar√° numa tupla!
</p>

<p>Vamos continuar com o nosso exemplo, sendo que agora todo ele:</p>
<pre><code class="hljs javascript">/**
 * Arquivo: generic-rest-parameters.ts
 * Author: Glaucia Lemos
 * Data: 23/08/2018
 */

declare function bind&lt;G, L extends any[], U&gt;(f: (x: G, ...args: L) =&gt; U, x: U): (...args: L) =&gt; U;

declare function f3(x: number, y: string, z: boolean) : void;

const f2 = bind(f3, 4); // (y: string, z: boolean) =&gt; void
const f1 = bind(f2, 'chocolate'); // (z: boolean) =&gt; void
const f0 = bind(f1, true); // () =&gt; void

f3(2, 'chocolate', true);
f2('chocolate', true);
f1(true)
f0();</code></pre>

<p>Notem a fun√ß√£o ‚Äòf2‚Äô. Ele faz infer√™ncia aos tipos:</p>
<ul>
<li>G: number</li>
<li>L: [string, boolean]</li>
<li>U: void</li>
</ul>
<p>
  J√° L, que √© um tipo tupla, √© inferido com a sequ√™ncia de par√¢metros e depois expandido para uma lista de par√¢metros.
</p>

<p>
  Isso √© interessante, pois nos permite uma melhor ordena√ß√£o e declara√ß√£o de listas parciais de par√¢metros. Vamos a uma outra mudan√ßa interessante:
</p>

<ul>
<li>Elementos opcionais</li>
</ul>
<p>
  O que seria isso? Agora podemos usar ‚Äò?‚Äô para indicar para uma determinada tupla que √© opcional. Vejam o exemplo abaixo:
</p>

<pre><code class="hljs javascript"><span class="hljs-comment">/**
 * Arquivo: optional-elements.ts
 * Author: Glaucia Lemos
 * Data: 23/08/2018
 *
 */</span>

<span class="hljs-keyword">let</span> teste: [number, string?, boolean?];

teste = [<span class="hljs-number">42</span>, <span class="hljs-string">'chocolate'</span>, <span class="hljs-literal">true</span>];
teste = [<span class="hljs-number">42</span>, <span class="hljs-string">'chocolate'</span>];
teste = [<span class="hljs-number">42</span>]</code></pre>

<p>Notem que ao fazermos uso do ‚Äú?‚Äù, estamos indicando que aquele par√¢metro √© opcional. Legal, n√£o √© mesmo?</p>
<p>Vamos agora para a pr√≥xima mudan√ßa que veio na vers√£o 3.0 do Typescript: tipo &#39;unknown&#39;</p>
<h2 id="tipo-unknown">Tipo Unknown</h2>
<p>Sim, na vers√£o 3.0 do Typescript teremos agora um novo tipo: ‚Äòunknown‚Äô.</p>
<p>
  O tipo unknown seria uma vers√£o mais segura ‚Äì por assim dizer ‚Äì do tipo 'any'. Como o tipo 'any' pode ser qualquer coisa e qualquer valor, dificultava na hora de fazer a verifica√ß√£o desse tipo. J√° com o tipo unknown, podemos atribuir qualquer valor ao tipo 'unknown' (assim como j√° acontece com o tipo 'any').
</p>

<p>
  Outro ponto a salientar aqui, √© que com o tipo ‚Äòunknown‚Äô n√£o podemos fazer opera√ß√µes antes de definir para um tipo espec√≠fico. E ele tamb√©m √© atribu√≠do para ele mesmo ou ao tipo ‚Äòany‚Äô. Bom, para ficar claro essa mudan√ßa, vamos ver no c√≥digo:
</p>

<pre><code class="hljs javascript"><span class="hljs-comment">/**
 * Arquivo: unknown-type.ts
 * Author: Glaucia Lemos
 * Data: 23/08/2018
 */</span>

<span class="hljs-keyword">let</span> textoExemplo: unknown = <span class="hljs-number">10</span>;

<span class="hljs-comment">// O c√≥digo abaixo n√£o ir√° executar uma vez que 'textoExemplo' √© do tipo 'unknown'</span>
textoExemplo.x.prop;
textoExemplo.y.prop;
textoExemplo.z.prop;

textoExemplo();
<span class="hljs-keyword">new</span> tetextoExemplost();
upperCase(textoExemplo);
textoExemplo <span class="hljs-string">`Oi Pessoal!`</span>;

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">upperCase</span>(<span class="hljs-params">x: string</span>) </span>{
    <span class="hljs-keyword">return</span> x.toUpperCase();
}</code></pre>

<p>Esse c√≥digo de forma alguma ir√° executar conforme descrito no coment√°rio. Mas, vamos alterar algumas coisas aqui:</p>
<pre><code class="hljs javascript"><span class="hljs-comment">/**
 * Arquivo: unknown-type.ts
 * Author: Glaucia Lemos
 * Data: 23/08/2018
 */</span>

<span class="hljs-comment">// Agora sim.. vai funfar!!</span>
<span class="hljs-keyword">let</span> textoExemplo: unknown = <span class="hljs-number">10</span>;

<span class="hljs-comment">// Aqui vamos colocar com o tipo ‚Äòany‚Äô</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">verificarTipos</span>(<span class="hljs-params">obj: any</span>): <span class="hljs-title">obj</span> <span class="hljs-title">is</span> </span>{ x: any, <span class="hljs-attr">y</span>: any, <span class="hljs-attr">z</span>: any } {
    <span class="hljs-keyword">return</span> !!obj &amp;&amp;
        <span class="hljs-keyword">typeof</span> obj === <span class="hljs-string">'object'</span> &amp;&amp;
        <span class="hljs-string">'x'</span> <span class="hljs-keyword">in</span> obj &amp;&amp;
        <span class="hljs-string">'y'</span> <span class="hljs-keyword">in</span> obj &amp;&amp;
        <span class="hljs-string">'z'</span> <span class="hljs-keyword">in</span> obj;
}

<span class="hljs-comment">// Agora ficar√£o as propriedades ficar√£o acess√≠veis:</span>
<span class="hljs-keyword">if</span>(verificarTipos(textoExemplo)) {
    textoExemplo.x.prop;
    textoExemplo.y.prop;
    textoExemplo.z.prop;
}

upperCase(textoExemplo <span class="hljs-keyword">as</span> string);

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">upperCase</span>(<span class="hljs-params">x: string</span>) </span>{
    <span class="hljs-keyword">return</span> x.toUpperCase();
}</code></pre>

<p>
  Notem que estamos for√ßando eles para verificar os tipos ou usar um tipo mais assertivo que a aplica√ß√£o/sistema acha melhor para ele!
</p>

<p>
  Vamos agora falar da √∫ltima mudan√ßa dessa vers√£o 3.0: suporte para 'defaultProps' em JSX!
</p>

<h2 id="defaultprops-em-jsx">defaultProps em JSX</h2>
<p>
  Essa mudan√ßa √© super conveniente para desenvolvedores front-end que trabalham com React e Typescript! Antes, o Typescript n√£o permitia fazer declara√ß√µes em aplica√ß√µes React com o defaultProps dentro de componentes JSX.
</p>

<p>
  T√≠nhamos que declarar propriedades opcionais e usar afirma√ß√µes n√£o nulas dentro de render, conforme segue o exemplo abaixo:
</p>

<pre><code class="hljs javascript"><span class="hljs-comment">/**
 * Arquivo: defaultProps-jsx.ts
 * Author: Glaucia Lemos
 * Data: 23/08/2018
 */</span>

<span class="hljs-comment">// Antes:</span>
<span class="hljs-keyword">export</span> interface Props { name?: string }

<span class="hljs-keyword">export</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Saudar</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">React</span>.<span class="hljs-title">Component</span>&lt;<span class="hljs-title">Props</span>&gt; </span>{
    render() {
        <span class="hljs-keyword">const</span> { nome } = <span class="hljs-keyword">this</span>.props;
        <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>Fala ${nome!.toUpperCase()}!<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
    }

    <span class="hljs-keyword">static</span> defaultProps = { <span class="hljs-attr">nome</span>: <span class="hljs-string">'Glaucia Lemos'</span> }
}</code></pre>

<p>Agora com a nova vers√£o, podemos fazer da seguinte maneira:</p>
<pre><code class="hljs javascript"><span class="hljs-comment">/**
 * Arquivo: defaultProps-jsx.ts
 * Author: Glaucia Lemos
 * Data: 23/08/2018
 */</span>

<span class="hljs-comment">// Antes:</span>
<span class="hljs-comment">/*export interface Props { name?: string }

export class Saudar extends React.Component&lt;Props&gt; {
    render() {
        const { nome } = this.props;
        return &lt;div&gt;Fala ${nome!.toUpperCase()}!&lt;/div&gt;;
    }

    static defaultProps = { nome: 'Glaucia Lemos' }
}*/</span>

<span class="hljs-comment">// Depois (com a vers√£o 3.0):</span>
<span class="hljs-keyword">export</span> interface Props {
    <span class="hljs-attr">nome</span>: string
}

<span class="hljs-keyword">export</span> interface Props {
    <span class="hljs-attr">nome</span>: string
}

<span class="hljs-keyword">export</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Saudar</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">React</span>.<span class="hljs-title">Component</span>&lt;<span class="hljs-title">Props</span>&gt; </span>{
    render() {
        <span class="hljs-keyword">const</span> { nome } = <span class="hljs-keyword">this</span>.props;
        <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>Fala ${nome.toUpperCase()}!<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
    }
    <span class="hljs-keyword">static</span> defaultProps = { <span class="hljs-attr">nome</span>: <span class="hljs-string">"Glaucia Lemos"</span>}
}

<span class="hljs-comment">// Sem a necessidade de fazer uso de tipo assertion aqui:</span>
<span class="hljs-keyword">let</span> texto = <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Saudar</span> /&gt;</span></span></code></pre>

<p>
  Legal, n√©? H√° algumas limita√ß√µes ao fazer uso desse suporte. Pe√ßo que entrem no site oficial da documenta√ß√£o do Typescript para ver outros exemplos e explica√ß√µes de forma mais completa sobre as mudan√ßas da vers√£o 3.0 atrav√©s <b><a href="https://www.typescriptlang.org/docs/handbook/release-notes/typescript-3-0.html">deste link</a></b>.
</p>

<h2 id="conclus√£o">Conclus√£o</h2>
<p>
  Como j√° mencionado no in√≠cio desse artigo, h√° outras mudan√ßas que vieram para facilitar nossas vidas. Pe√ßo que entrem neste link para saberem mais sobre as outras mudan√ßas n√£o mencionadas aqui. Os c√≥digos desenvolvidos se encontram no meu <b><a href="https://github.com/glaucia86/typescript-3-novidades-imasters">reposit√≥rio do GitHub</a></b>.
</p>

<p>At√© a pr√≥xima pessoal! üòçüòç</p>

    </div>
  </div>
</main>

</body>
</html>
